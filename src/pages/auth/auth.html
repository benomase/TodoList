<ion-header *ngIf="getState() | async as user; else showLogin">
  <ion-navbar color="navBar">
    <ion-buttons end>
      <button ion-button icon-only icon-left (click)="notifications()">
        <ion-icon name="notifications"></ion-icon>
        <ion-label>
          {{ waitingListsIds.length}}
        </ion-label>
      </button>
      <button ion-button icon-only icon-left (click)="logout()">
        <ion-icon ios="ios-log-out" md="md-log-out"></ion-icon>
        Logout
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content center text-center padding>
  <div *ngIf="getState() | async as user; else showLogin">
    <ion-img width="100px" height="100px" src="{{user.photoURL}}" *ngIf="user.photoURL"></ion-img>
    <h1>Hello {{ user.displayName }} !</h1>
    <button ion-button full outline icon-left (click)="accessToMyTodoList()" style="margin-top: 5%">
      <ion-icon ios="ios-list" md="md-list"></ion-icon>
      Go To My Lists
    </button>
    <h1  style="margin-top:12%" text-center>
      Statistics
    </h1><!--
    <ion-row style="margin-top: 5%">
      <ion-col width-30>
        <h3>
          <ion-icon name="list-box" style="zoom:4.0;"></ion-icon>
        </h3>
        <h2>{{todoListsIds.length}}</h2>
      </ion-col>
      <ion-col width-30>
        <h3>
          <ion-icon name="checkbox" style="zoom:4.0;"></ion-icon>
        </h3>
        <h2>{{stats.doneCount}}</h2>
      </ion-col>
      <ion-col width-30>
        <h3>
          <ion-icon name="hammer" style="zoom:4.0;"></ion-icon>
        </h3>
        <h2>{{pendingCount}}</h2>
      </ion-col>
    </ion-row>-->
  </div>
  <ng-template #showLogin>
    <form [formGroup]="loginForm" (submit)="loginUser()" novalidate>
      <ion-item>
        <ion-label>
          <ion-icon name="person"></ion-icon>
        </ion-label>
        <ion-input formControlName="email" type="email" placeholder="Votre email" [class.invalid]="!loginForm.controls.email.valid && blur"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label>
          <ion-icon name="lock"></ion-icon>
        </ion-label>
        <ion-input formControlName="password" type="password" placeholder="Votre mot de passe" [class.invalid]="!loginForm.controls.password.valid && blur"></ion-input>
      </ion-item>
      <button ion-button block type="submit" [disabled]="!loginForm.valid">
        Login
      </button>
    </form>
    <button ion-button block color="danger" (click)="goToLoginGoogleNative()">
        <ion-icon name="logo-googleplus"></ion-icon>
        Google
      </button>
    <ion-row>
      <ion-col col-5>
        <button ion-button  clear color="danger" (click)="goToSignup()">
          Créer un compte /
        </button>
      </ion-col>
      <ion-col col->
        <button ion-button block clear color="danger" (click)="goToResetPassword()">
          Mot de passe oublié?
        </button>
      </ion-col>
    </ion-row>
  </ng-template>
</ion-content>
